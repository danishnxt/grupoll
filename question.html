<!DOCTYPE html>
<html>
<head>
	<title>Question View</title>
</head>
<body>
<div id="question_statement">Loading...</div>
<button id="option_1">...</button>
<button id="option_2">...</button>
<button id="option_3">...</button>
<img src="danish.png"></img>
</body>

<script src="/socket.io/socket.io.js"></script>
<script type="text/javascript">
	const socket = io();

	const addQuestionStatement = statement => {

		document.getElementById('question_statement').innerHTML = statement;
	};

	const addAnswerOptions = (o1, o2, o3) => {
		document.getElementById('option_1').innerHTML = o1;
		document.getElementById('option_2').innerHTML = o2;
		document.getElementById('option_3').innerHTML = o3;
	};

	const myUserID = '5adb32fce1144d2c68430c95';
	socket.emit('msgUserInitialization', { userID : myUserID });

	const msg = {
		userID : myUserID,
		questionStatement : 'Why can\'t Danish get a girlfriend?',
		questionType : true,
		containsImage : false,
		containsVoice : false,
		imageLink : '',
		voiceLink : '',
		categoryID : '5adc5bdcedc3892a0c51a55f',
		answerTimeLimit : Date.now(),
		userSeen : false
	};

	const answerMsg = {
		option1 : 'He\'s too hot',
		option2 : 'He\'s too smart',
		option3 : 'He\'s too nice',
		option1Link : '',
		option2Link : '',
		option3Link : ''
	};

	socket.on('msgAnswerPostRequestConfirmed', result => {
		addAnswerOptions(result.option_1, result.option_2, result.option_3);
	});

	socket.on('msgQuestionPostRequestConfirmed', result => {
		addQuestionStatement(result.statement);

		answerMsg.questionID = result._id;
		socket.emit('msgAnswerPostRequest', answerMsg);

		// socket.emit('msgQuestionVoteRequest', { userID : myUserID, questionID : result._id, value : 1 });
	});

	socket.emit('msgQuestionPostRequest', msg);
</script>

</html>