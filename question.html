<!DOCTYPE html>
<html>
<link rel="stylesheet" type="text/css" href="question.css">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<head>
	<title>Question View</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

</head>
<body background="background.jpg">
<main>
<div id='app_header'></div>

<div id="question_statement">
  <div id = "qbar" > 
	  <div id="bar"></div>
	  <div id="bar"></div>
	  <div id="bar"></div>
  </div>
</div>


 <nav>
	    <div class="nav-right hidden-xs">
	      <div class="button" id="btn">
	        <div class="bar top"></div>
	        <div class="bar middle"></div>
	        <div class="bar bottom"></div>
	      </div>
	    </div>
	    <!-- nav-right -->
	  </nav>

	  <a href="https://codepen.io/tonkec/" class="ua" target="_blank">
	    <i class="fa fa-user"></i>
	  </a>



<center>
	<div>
		<button id="option_1">...</button>
	</div>
	
		<span style="10px"></span>
	
	<div>
		<button id="option_2">...</button>
	</div>
	
	<div>
		<button id="option_3">...</button>
	</div>
</center>

</main>

<div id='profileBar'>
	

	<div class="nav-right visible-xs">
	  <div class="button" id="btn">
	    <div class="bar top"></div>
	    <div class="bar middle"></div>
	    <div class="bar bottom"></div>
	  </div>
	</div>
	<!-- nav-right -->

	<div class="sidebar">
	  <ul class="sidebar-list">
	    <li class="sidebar-item"><a href="#" class="sidebar-anchor">Item 1</a></li>
	    <li class="sidebar-item"><a href="#" class="sidebar-anchor">Item 2</a></li>
	    <li class="sidebar-item"><a href="#" class="sidebar-anchor">Item 3</a></li>
	    <li class="sidebar-item"><a href="#" class="sidebar-anchor">Item 4</a></li>
	  </ul>
	</div>


</div>



<div id='footer'></div>


</body>

<script src="/socket.io/socket.io.js"></script>
<script type="text/javascript">
	const socket = io();
	const addQuestionStatement = statement => {

		document.getElementById('question_statement').innerHTML = '<center>'+'<h2 id= question >' + statement + '</h2>' + '</center>';
		
		document.getElementById('option_1').style.visibility = 'visible';
		document.getElementById('option_2').style.visibility = 'visible';
		document.getElementById('option_3').style.visibility = 'visible';
						


		// the for loop causes the problem
		/*for(int i=0; i<3; i++){
			document.getElementById(`option_${i+1}`).style.visibility = 'visible';

		}*/

	};
	const addAnswerOptions = (o1, o2, o3) => {
		document.getElementById('option_1').innerHTML = o1;
		document.getElementById('option_2').innerHTML = o2;
		document.getElementById('option_3').innerHTML = o3;
	};
	const myUserID = '5adb32fce1144d2c68430c95';
	socket.emit('msgUserInitialization', { userID : myUserID });
	const msg = {
		userID : myUserID,
		questionStatement : 'Why can\'t Danish get a girlfriend?',
		questionType : true,
		containsImage : false,
		containsVoice : false,
		imageLink : '',
		voiceLink : '',
		categoryID : '5adc5bdcedc3892a0c51a55f',
		answerTimeLimit : Date.now(),
		userSeen : false
	};
	const answerMsg = {
		option1 : 'He\'s too hot',
		option2 : 'He\'s too smart',
		option3 : 'He\'s too nice',
		option1Link : '',
		option2Link : '',
		option3Link : ''
	};
	socket.on('msgAnswerPostRequestConfirmed', result => {
		addAnswerOptions(result.option_1, result.option_2, result.option_3);
	});
	socket.on('msgQuestionPostRequestConfirmed', result => {
		addQuestionStatement(result.statement);
		answerMsg.questionID = result._id;
		socket.emit('msgAnswerPostRequest', answerMsg);
		// socket.emit('msgQuestionVoteRequest', { userID : myUserID, questionID : result._id, value : 1 });
	});
	
	socket.emit('msgQuestionPostRequest', msg);

	// side bar left

	function w3_open() {
    document.getElementById("mySidebar").style.display = "block";
	}
	function w3_close() {
	    document.getElementById("mySidebar").style.display = "none";
	}

	// side bar right

	function toggleSidebar() {
	    $(".button").toggleClass("active");
	    $("main").toggleClass("move-to-left");
	    $(".sidebar-item").toggleClass("active");
  	}

  	$(".button").on("click tap", function() {
    	toggleSidebar();
  	});

  	$(document).keyup(function(e) {
    	if (e.keyCode === 27) {
      	toggleSidebar();
    	}
  	});


</script>

</html>